<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#03a9f4">

  <title>Daimler Direct Deposit Request</title>

  <link rel="icon" sizes="192x192" href="icon.png">

  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild-->

  <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <!-- endbuild -->

  <!-- build:vulcanized elements/elements.vulcanized.html -->
  <link rel="import" href="elements/elements.html">
  <!-- endbuild-->

  <style is="custom-style">
    #logo {
      background: transparent url('images/logo.png') no-repeat;
      background-size: cover;
      display: inline-block;
      height: 20px;
      width: 149px;
    }

    #logo-toolbar {
      background-color: #ffffff;
    }
  </style>
</head>

<body unresolved class="fullbleed layout vertical">

  <template is="dom-bind" id="app">

    <nuxeo-connection url="/nuxeo"></nuxeo-connection>

    <paper-header-panel flex>

      <paper-toolbar id="logo-toolbar">
        <div id="logo"></div>
      </paper-toolbar>

      <paper-toolbar class="medium-tall">
        <paper-icon-button icon="[[toolbarIcon(task)]]" on-tap="back"></paper-icon-button>
        <div class="title">[[toolbarTitle(task)]]</div>
        <paper-icon-button icon="refresh" on-tap="refresh"></paper-icon-button>
        <paper-tabs selected="{{selectedTab}}" valueattr="path" class="fit bottom">
          <paper-tab>NEW REQUESTS</paper-tab>
          <paper-tab>PENDING REQUESTS</paper-tab>
        </paper-tabs>
      </paper-toolbar>

      <iron-pages selected="[[selectedTab]]">

        <!-- Task List -->
        <nx-task-list class="fit" workflow-model="EMDirectDepositRequest" task="{{task}}">


          <!-- Create -->
          <template is="dom-if" if="[[isStep('create',task)]]">
            <!-- Account Type -->
            <div item>
              <iron-icon icon="account-balance" item-icon></iron-icon>
              <select value="{{task.variables.account-type::change}}">
                <option value="checking">Checking</option>
                <option value="savings">Savings</option>
              </select>
            </div>
            <!-- Routing Number -->
            <div item>
              <iron-icon icon="label" item-icon></iron-icon>
              <input is="iron-input" bind-value="{{task.variables.routing-number}}" placeholder="123456789" required>
            </div>
            <!-- Account Number -->
            <div item>
              <iron-icon icon="account-balance-wallet" item-icon></iron-icon>
              <input is="iron-input" bind-value="{{task.variables.account-number}}" placeholder="0123456789" required>
            </div>
            <!-- Deposit Type -->
            <div item>
              <iron-icon icon="label" item-icon></iron-icon>
              <select value="{{task.variables.deposit-type::change}}">
                <option value="balance">Balance</option>
                <option value="amount">Amount</option>
                <option value="percent">Percentage</option>
              </select>
            </div>
            <!-- Amount -->
            <div item>
              <iron-icon icon="label" item-icon></iron-icon>
              <template is="dom-if" if="[[isMatch('amount',task.variables.deposit-type)]]">
                <label>$</label>
                <input is="iron-input" bind-value="{{task.variables.amount}}" type="number" step="0.01" required>
              </template>
              <template is="dom-if" if="[[isMatch('percent',task.variables.deposit-type)]]">
                <input is="iron-input" bind-value="{{task.variables.amount}}" type="number" required>
                <label>%</label>
              </template>
            </div>
            <div item>
              <iron-icon icon="attachment" item-icon></iron-icon>
              <nuxeo-file value="{{task.variables.attachment}}"></nuxeo-file>
            </div>
          </template>


          <!-- Accept / Reject -->
          <template is="dom-if" if="[[isStep('accept',task)]]">
            <div item>
              <iron-icon icon="label" title="[[i18n('wf.directDeposit.label')]]" item-icon></iron-icon>
              <span>[[task.variables.label]]</span>
            </div>
            <div item>
              <iron-icon icon="credit-card" title="[[i18n('wf.directDeposit.amount')]]" item-icon></iron-icon>
              <span>[[task.variables.amount]]</span>
              <label>&euro;</label>
            </div>
            <div item>
              <iron-icon icon="description" title="[[i18n('wf.directDeposit.description')]]" item-icon></iron-icon>
              <span>[[task.variables.description]]</span>
            </div>
            <div item>
              <iron-icon icon="work" title="[[i18n('wf.directDeposit.department')]]" item-icon></iron-icon>
              <span>[[task.variables.department]]</span>
            </div>
            <div item>
              <iron-icon icon="store" title="[[i18n('wf.directDeposit.nature')]]" item-icon></iron-icon>
              <span>[[task.variables.expensenature]]</span>
            </div>
            <div item>
              <iron-icon icon="attachment" title="[[i18n('wf.directDeposit.file')]]" item-icon></iron-icon>
              <a href="[[task.variables.file.url]]" target="_blank">[[task.variables.file.name]]</a>
            </div>
          </template>

          <!-- Accountancy -->
          <template is="dom-if" if="[[isStep('accountancy',task)]]">
            <div item>
              <iron-icon icon="label" item-icon></iron-icon>
              <span>[[task.variables.label]]</span>
            </div>
            <div item>
              <iron-icon icon="credit-card" item-icon></iron-icon>
              <span>[[task.variables.amount]]</span>
              <label>&euro;</label>
            </div>
            <div item>
              <iron-icon icon="description" item-icon></iron-icon>
              <span>[[task.variables.description]]</span>
            </div>
            <div item>
              <iron-icon icon="work" item-icon></iron-icon>
              <span>[[task.variables.department]]</span>
            </div>
            <div item>
              <iron-icon icon="store" item-icon></iron-icon>
              <span>[[task.variables.expensenature]]</span>
            </div>
            <div item>
              <iron-icon icon="label" item-icon></iron-icon>
              <input value="{{task.variables.customer_code}}" placeholder="Customer code" required>
            </div>
            <div item>
              <iron-icon icon="attachment" title="[[i18n('wf.directDeposit.file')]]" item-icon></iron-icon>
              <a href="[[task.variables.file.url]]" target="_blank">[[task.variables.file.name]]</a>
            </div>
          </template>
        </nx-task-list>

        <!-- Workflow List -->
        <nx-workflow-list fit workflowModel="EMDirectDepositRequest"></nx-workflow-list>

      </iron-pages>

    </paper-header-panel>
  </template>

  <!-- build:js vendor/jquery.js -->
  <script src="bower_components/jquery/dist/jquery.js"></script>
  <!-- endbuild-->

  <!-- build:js vendor/moment.js -->
  <script src="bower_components/moment/min/moment-with-locales.js"></script>
  <!-- endbuild-->

  <!-- build:js scripts/app.js -->
  <script src="scripts/app.js"></script>
  <!-- endbuild-->

</body>

</html>
